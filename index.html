<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Agendamento - GR Barbearia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f7f7f7;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 500px;
            margin: auto;
            padding: 20px;
            background: white;
            margin-top: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        .logo {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo img {
            width: 120px;
            height: auto;
        }

        h2 {
            text-align: center;
            margin-bottom: 10px;
            color: #222;
        }

        label {
            display: block;
            margin: 12px 0 4px;
            font-weight: bold;
        }

        input,
        select,
        button {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        button {
            background-color: #111;
            color: white;
            margin-top: 15px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background-color: #333;
        }

        .preco {
            margin-top: 10px;
            font-weight: bold;
            text-align: right;
        }

        .success {
            background-color: #e6ffed;
            border: 1px solid #b2f5ca;
            color: #22543d;
            padding: 12px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-size: 16px;
        }

        .hidden {
            display: none;
        }

        .icons-container {
            display: flex;
            justify-content: center; /* centraliza horizontalmente */
            gap: 20px; /* espaço entre os ícones */
            margin-top: 20px; /* distância do resto do conteúdo */
        }

        .icons-container a img {
            width: 40px;
            height: auto;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .icons-container a img:hover {
            transform: scale(1.1);
        }

    </style>
</head>

<body>
<div class="container">
    <div class="logo">
        <img src="GR Icon.JPG" alt="GR Barbearia"/>
    </div>
    <h2>Agende seu horário</h2>

    <label for="nome">Nome</label>
    <input type="text" id="nome" required maxlength="30"/>

    <label for="telefone">Telefone</label>
    <input type="tel" id="telefone" required oninput="formatarTelefone(this)" maxlength="15"/>

    <label for="email">E-mail</label>
    <input type="text" id="email" required/>

    <label for="servico">Serviço</label>
    <select id="servico"></select>

    <label for="profissional">Profissional</label>
    <select id="profissional"></select>

    <label for="data">Data</label>
    <input type="date" id="data"/>

    <label for="horario">Horário Disponível</label>
    <select id="horario"></select>

    <div class="preco" id="precoLabel">Preço: R$ 0,00</div>

    <button onclick="enviarAgendamento()">Confirmar Agendamento</button>
    <div class="success hidden" id="successMsg">
        ✅ Agendamento confirmado com sucesso!<br>
        Este aplicativo está em fase de testes. Em breve você receberá a confirmação oficial.
    </div>

    <p></p>

    <div class="icons-container">

        <a href="https://api.whatsapp.com/send?phone=5511984554233&text=Ol%C3%A1!%20Estou%20entrando%20em%20contato%20pelo%20site%20da%20GR%20Barbearia%20para%20agendar%20um%20hor%C3%A1rio.%20Pode%20me%20ajudar%2C%20por%20favor%3F%20%0A%F0%9F%98%80"
           target="_blank" rel="noopener noreferrer">
            <img src="icons/whatsapp.png" alt="GR Barbearia - Whatsapp">
        </a>

        <a href="https://www.instagram.com/gr.barbearia0?igsh=MTZkZmFmOGZ2ZGNqeg==" target="_blank"
           rel="noopener noreferrer">
            <img src="icons/instagram.png" alt="GR Barbearia - Instagram">
        </a>

        <a href="https://maps.app.goo.gl/J9tgG2D3vbvfz9ZN6" target="_blank" rel="noopener noreferrer">
            <img src="icons/maps.png" alt="GR Barbearia - Maps">
        </a>

    </div>

</div>

<script>
    const servicos = [
        {nome: "Corte Masculino", preco: 35.0},
        {nome: "Barba", preco: 20.0},
        {nome: "Corte + Barba", preco: 50.0}
    ];

    const profissionais = ["Guilherme GR"];
    const horariosFixos = ["10:00", "10:30", "11:00", "11:30", "12:00", "15:30", "17:00", "20:30", "21:00"];

    function carregarEnums() {
        const servicoSelect = document.getElementById("servico");
        servicoSelect.innerHTML = "";
        servicos.forEach(s => {
            const opt = document.createElement("option");
            opt.value = s.nome;
            opt.textContent = `${s.nome} - R$ ${s.preco}`;
            servicoSelect.appendChild(opt);
        });

        const profissionalSelect = document.getElementById("profissional");
        profissionalSelect.innerHTML = "";
        profissionais.forEach(p => {
            const opt = document.createElement("option");
            opt.value = p;
            opt.textContent = p;
            profissionalSelect.appendChild(opt);
        });

        atualizarPreco();
    }

    function carregarHorarios() {
        const dataSelecionada = document.getElementById("data").value;
        const horarioSelect = document.getElementById("horario");
        horarioSelect.innerHTML = "";

        if (!dataSelecionada) return;

        const hoje = new Date();
        const dataInput = new Date(dataSelecionada + "T00:00:00");

        let horariosValidos = horariosFixos;

        if (dataInput.toDateString() === hoje.toDateString()) {
            const agora = hoje.getHours() + hoje.getMinutes() / 60;
            horariosValidos = horariosFixos.filter(h => {
                const [hora, minuto] = h.split(":").map(Number);
                const horaDecimal = hora + minuto / 60;
                return horaDecimal > agora;
            });
        }

        horariosValidos.forEach(h => {
            const opt = document.createElement("option");
            opt.value = h;
            opt.textContent = h;
            horarioSelect.appendChild(opt);
        });
    }

    function atualizarPreco() {
        const servicoNome = document.getElementById("servico").value;
        const precoLabel = document.getElementById("precoLabel");
        const servico = servicos.find(s => s.nome === servicoNome);
        precoLabel.textContent = `Preço: R$ ${servico ? servico.preco.toFixed(2) : "0,00"}`;
    }

    function formatarTelefone(input) {
        let value = input.value.replace(/\D/g, "");
        if (value.length > 11) value = value.slice(0, 11);
        if (value.length > 10) {
            value = value.replace(/^(\d{2})(\d{5})(\d{4})$/, "($1) $2-$3");
        } else if (value.length > 6) {
            value = value.replace(/^(\d{2})(\d{4})(\d{0,4})$/, "($1) $2-$3");
        } else if (value.length > 2) {
            value = value.replace(/^(\d{2})(\d{0,5})$/, "($1) $2");
        } else {
            value = value.replace(/^(\d*)$/, "($1");
        }
        input.value = value;
    }

    function enviarAgendamento() {
        const nome = document.getElementById("nome").value;
        const telefone = document.getElementById("telefone").value;
        const email = document.getElementById("email").value;

        if (!validarEmail(email)) {
            alert("Por favor, insira um e-mail válido.");
            return;
        }

        const data = document.getElementById("data").value;
        const hora = document.getElementById("horario").value;
        const profissional = document.getElementById("profissional").value;
        const servicoNome = document.getElementById("servico").value;
        const servico = servicos.find(s => s.nome === servicoNome);
        const preco = servico?.preco || 0;

        if (!nome || !telefone || !data || !hora || !profissional || !servicoNome || !email) {
            alert("Preencha todos os campos!");
            return;
        }

        console.log({nome, telefone, data, hora, profissional, servico: servicoNome, preco});

        document.getElementById("successMsg").classList.remove("hidden");
    }

    function configurarData() {
        const inputData = document.getElementById("data");
        const hoje = new Date();
        const max = new Date();
        max.setDate(hoje.getDate() + 15);

        const toISO = (date) => date.toISOString().split("T")[0];

        inputData.min = toISO(hoje);
        inputData.max = toISO(max);
    }

    document.getElementById("servico").addEventListener("change", atualizarPreco);
    document.getElementById("data").addEventListener("change", carregarHorarios);
    document.getElementById("profissional").addEventListener("change", carregarHorarios);

    configurarData();
    carregarEnums();

    function validarEmail(email) {
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return regex.test(email);
    }

</script>
</body>

</html>
